name: sros-services

mgmt:
  network: sros-lab-mgmt
  ipv4-subnet: 172.10.10.0/24
  ipv6-subnet: 2001:172:10:10::/64

prefix: ""
topology:
  defaults:
    kind: nokia_sros
  kinds:
    nokia_sros:
      type: sr-1-24d
      image: vrnetlab/nokia_sros:25.3.R1
      license: license-sros25.txt
    linux:
      image: ghcr.io/srl-labs/network-multitool
  nodes:
    pe1:
      startup-config: configs/pe1-startup.cfg
      mgmt-ipv4: 172.10.10.2
      mgmt-ipv6: 2001:172:10:10::2
    pe2:
      startup-config: configs/pe2-startup.cfg
      mgmt-ipv4: 172.10.10.3
      mgmt-ipv6: 2001:172:10:10::3
    pe3:
      startup-config: configs/pe3-startup.cfg
      mgmt-ipv4: 172.10.10.4
      mgmt-ipv6: 2001:172:10:10::4
    pe4:
      startup-config: configs/pe4-startup.cfg
      mgmt-ipv4: 172.10.10.5
      mgmt-ipv6: 2001:172:10:10::5
    p1:
      startup-config: configs/p1-startup.cfg
      mgmt-ipv4: 172.10.10.6
      mgmt-ipv6: 2001:172:10:10::6
    p2:
      startup-config: configs/p2-startup.cfg
      mgmt-ipv4: 172.10.10.7
      mgmt-ipv6: 2001:172:10:10::7
    cea:
      kind: linux
      mgmt-ipv4: 172.10.10.10
      mgmt-ipv6: 2001:172:10:10::10
      exec:
        - ip link add name eth1.200 link eth1 type vlan id 200
        - ip addr add 192.168.10.1/24 dev eth1.200
        - ip link set dev eth1.200 up
    ceb:
      kind: linux
      mgmt-ipv4: 172.10.10.11
      mgmt-ipv6: 2001:172:10:10::11

    cez:
      kind: linux
      mgmt-ipv4: 172.10.10.12
      mgmt-ipv6: 2001:172:10:10::12
      exec:
        - ip link add name eth1.200 link eth1 type vlan id 200
        - ip addr add 192.168.10.2/24 dev eth1.200
        - ip link set dev eth1.200 up

    cey:
      kind: linux
      mgmt-ipv4: 172.10.10.13
      mgmt-ipv6: 2001:172:10:10::13

  links:
    # pe-p links
    - endpoints: ["pe1:eth1", "p1:eth1"]
    - endpoints: ["pe2:eth1", "p2:eth1"]
    - endpoints: ["pe1:eth2", "p2:eth2"]
    - endpoints: ["pe2:eth2", "p1:eth2"]
    - endpoints: ["pe3:eth3", "p1:eth3"]
    - endpoints: ["pe4:eth3", "p2:eth3"]
    - endpoints: ["pe3:eth4", "p2:eth4"]
    - endpoints: ["pe4:eth4", "p1:eth4"]
    # pe-ce links
    - endpoints: ["cea:eth1","pe1:eth10"]
    - endpoints: ["cez:eth1","pe3:eth10"]
    - endpoints: ["ceb:eth1","pe1:eth11"]
    - endpoints: ["ceb:eth2","pe2:eth11"]
    - endpoints: ["cey:eth1","pe3:eth11"]
    - endpoints: ["cey:eth2","pe4:eth11"]